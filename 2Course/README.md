# Курсовая работа - часть 2

## Задание: 

Написать синтаксический анализатор разбирающий текст и генератор продолжения текста по введенному слову. Для этого выполнить следующие задачи:

1) Прочитать текст из файла, указываемого пользователем. Синтаксически проанализировать текст согласно правилам: слова состоят только из букв; предложения состоят только из слов и разделены символами: !?;:. Разбить текст на предложения. Удалить все символы пунктуации и цифры из слов и предложений.
2) Составить модель N-грамм. Использовать модель биграмм и триграмм. По списку предложений составить словарь. Ключами являются: одно слово, либо пара слов. Значениями в словаре является список всех уникальных возможных продолжений триграммы (т.е. список пар слов или одиночных слов). Словарь сохранить в файл .txt.

*Пример текста и словаря на его основе:* 
> **Текст:**
> 
> "a b, c d e! b c d? e b c# a ^ d. a f; f."
>
> **Словарь:**
> 
> ["а" : ["b", "d", "f", "b c"]; "b" : ["c", "c d", "c a"]; "c" : ["d", "a", "d e", "a d"]; "d" : ["e"]; "e" : ["b", "b c"]; "а b" : ["c"]; "b c" : ["d", "a"]; "c d" : ["e"]; "e b" : ["c"]; "c a" : ["d"]; "f" : []]

3) Реализовать взаимодействие с пользователем. Пользователь вводит одно слово или пару слов. Программа возвращает строку случайной длины в диапазоне от 2 до 15 слов, если задаваемого пользователем слова нет в ключах словаря, выдавать соответствующее сообщение.  
Фраза составляется путем добавления случайного слова (или пары) из списка значений текущего слова-ключа (или пары-ключа), до тех пор, пока либо не будет сформировано предложение нужной длины, либо не будет достигнут ключ, у которого нет значений.
4) Организовать диалог двух моделей N-грамм созданных на двух разных текстах. Тексты для второй модели выбрать самостоятельно. Пользователь задает начальное слово (или пару) и глубину М сообщений, которыми обмениваются модели. Ответ модели основывается на последнем слове из предложения оппонента (если последнее слово отсутствует в словаре, то предпоследнее и т.д. пока не будет найдено подходящее слово или не закончится предложение оппонента)

> Автор текстов:
> **Куприн, Александр Иванович**

---

## Файлы реализации
В файле `src\Lib.hs` написаны все чистые функции. Доступ предоставлен только к нескольким, которые используются в `app\Main.hs`.  

В файле `app\Main.hs` написаны все функции работающие с файлами и взаимодействующие с пользователем через терминал.  

В папке `files` находятся файлы с текстами Куприна, а также файл с тестовым текстом, описанным в задании.

---

# Запуск программы 

## Запуск через `stack`
Пишем команду для сборки проекта:
```
stack build
```
после успешной сборки запускаем программу:
```
stack run
```

## Другой запуск через `stack`
Пишем команду для сборки проекта:
```
stack build
```
после успешной сборки запускаем программу:
```
stack exec 2Course-exe
```


## Запуск через `ghci` 
Заходим в  `ghci` :
```
stack ghci
```
после загружаем необходимый файл, из которого хотим запустить функцию. В данном случае это функция `main` в `app\Main.hs`:
```
:l app\Main.hs
```
запускаем необходимую нам функцию:
```
main
```


---


## Генерация пар значений и их количества (дополнительное задание)

В словаре генерируются не просто значения, а пары значений и их количества. Это позволяет отслеживать частоту появления каждого значения в словаре.

*Пример текста и словаря на его основе:*
> **Текст:**
> 
> "a b, c d e! b c d? e b c# a ^d. a b f; f."
> 
> **Словарь:**
>
> ["a" : [("b", 2), ("d", 1), ("b f", 1),("b c", 1)]; "b" : [("f", 1), ("c", 3), ("c a", 1), ("c d", 2)]; "c" : [("a", 1), ("d", 2), ("a d", 1), ("d e", 1)]; "d" : [("e", 1)]; "e" : [("b", 1), ("b c", 1)]; "f" : []; "a b" : [("f", 1), ("c", 1)]; "b c" : [("a", 1), ("d", 2)]; "c a" : [("d", 1)]; "c d" : [("e", 1)]; "e b" : [("c", 1)]]

## Корректная обработка слов при вводе и выводе

Для корректной обработки слов на кириллице при вводе и выводе в терминале используйте команду:

```bash
chcp 65001
```
